<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8"/>
    <title>Управление пользователями</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>

<header>
    <nav>
        <ul>
            <li><a th:href="@{/}">Главная</a></li>
            <li><a th:href="@{/profile}">Профиль</a></li>
            <li><a th:href="@{/admin/users}">Пользователи</a></li>
            <li><a th:href="@{/admin/subjects}">Предметы</a></li>
            <li><a th:href="@{/admin/classes}">Классы</a></li>
            <li><a th:href="@{/admin/schedule}">Расписание</a></li>
        </ul>
    </nav>
</header>

<main>
    <h1>Управление пользователями</h1>

    <button class="btn primary" onclick="showModal('addUserModal')">Добавить пользователя</button>
    <button class="btn secondary" onclick="showModal('selectRoleModal')">Список пользователей</button>

    <div id="addUserModal" class="modal">
        <h2>Добавить пользователя</h2>
        <form th:action="@{/admin/users/add}" method="post">
            <div class="form-group">
                <label>Логин:
                    <input class="input-field" type="text" name="username" required />
                </label>
            </div>
            <div class="form-group">
                <label>ФИО:
                    <input class="input-field" type="text" name="fullName" required />
                </label>
            </div>
            <div class="form-group">
                <label>Пароль:
                    <input class="input-field" type="password" name="password" required />
                </label>
            </div>
            <div class="form-group">
                <label>Email:
                    <input class="input-field" type="email" name="email" required />
                </label>
            </div>
            <div class="form-group">
                <label>Роль:
                    <select class="input-field" name="role" required>
                        <option value="ADMIN">Админ</option>
                        <option value="STUDENT">Ученик</option>
                        <option value="PARENT">Родитель</option>
                        <option value="TEACHER">Учитель</option>
                    </select>
                </label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn secondary" onclick="closeAllModals()">Отмена</button>
                <button type="submit" class="btn primary">Сохранить</button>
            </div>
        </form>
    </div>

    <div id="selectRoleModal" class="modal">
        <h2>Выберите роль</h2>
        <div class="role-selection">
            <button class="btn secondary" onclick="selectRole('ADMIN')">Админы</button>
            <button class="btn secondary" onclick="selectRole('STUDENT')">Ученики</button>
            <button class="btn secondary" onclick="selectRole('PARENT')">Родители</button>
            <button class="btn secondary" onclick="selectRole('TEACHER')">Учителя</button>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn secondary" onclick="closeAllModals()">Закрыть</button>
        </div>
    </div>

    <div id="listUsersModal" class="modal">
        <h2>Пользователи</h2>
        <div class="scroll-container">
            <table>
                <thead>
                <tr><th>Логин</th><th>ФИО</th><th>Email</th><th>Действия</th></tr>
                </thead>
                <tbody id="usersTableBody">
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn secondary" onclick="closeAllModals()">Закрыть</button>
        </div>
    </div>
</main>

<div class="modal-overlay" id="modalOverlay" onclick="closeAllModals()"></div>

<script th:src="@{/js/modals.js}"></script>
<script th:src="@{/js/scripts.js}"></script>

<footer>
    <p>© 2025 EduDiary</p>
</footer>

</body>
</html>