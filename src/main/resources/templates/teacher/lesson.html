<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Редактирование урока</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<header>
    <nav>
        <ul>
            <li><a th:href="@{/}">Главная</a></li>
            <li><a th:href="@{/profile}">Профиль</a></li>
            <li><a th:href="@{/teacher/schedule/view}">Расписание</a></li>
        </ul>
    </nav>
</header>

<main>
    <h1>Редактирование урока: <span th:text="${lesson.classSubject.subject.name}"></span></h1>
    <p><strong>Класс:</strong> <span th:text="${lesson.classSubject.schoolClass.grade + lesson.classSubject.schoolClass.literal}"></span></p>
    <p><strong>Дата:</strong> <span th:text="${lesson.scheduleDay.date}"></span></p>

    <form th:action="@{/teacher/lessons/{id}/homework(id=${lesson.id})}" method="post">
        <div class="form-group">
            <label for="homework">Домашнее задание:</label><br>
            <textarea id="homework" name="homeworkDescription" rows="4" cols="60" class="input-field"
                      th:text="${lesson.homeworkDescription}"></textarea>
        </div>
        <button type="submit" class="btn primary">Сохранить задание</button>
    </form>

    <hr>

    <form th:action="@{/teacher/lessons/{id}/marks(id=${lesson.id})}" method="post">
        <div class="scroll-container">
            <table>
                <thead>
                <tr>
                    <th>Ученик</th>
                    <th>Оценка</th>
                    <th>Комментарий</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="studentMark : ${studentMarks}">
                    <td th:text="${studentMark.student.fullName}"></td>
                    <td>
                        <input type="number" th:name="'marks[' + ${studentMark.student().id} + '].value'"
                               min="1" max="5" class="input-field-small"
                               th:value="${studentMark.mark != null ? studentMark.mark.markValue : ''}">
                    </td>
                    <td>
                        <input type="text" th:name="'marks[' + ${studentMark.student.id} + '].comment'"
                               class="input-field"
                               th:value="${studentMark.mark != null ? studentMark.mark.comment : ''}">
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <button type="submit" class="btn primary" style="margin-top: 15px;">Сохранить оценки</button>
    </form>
</main>

<footer>
    <p>© 2025 EduDiary</p>
</footer>

</body>
</html>